{"version":3,"sources":["webpack:///./src/js/frontend.js"],"names":["jQuery","xhr","$","document","getElementById","addEventListener","srch","value","focus","autoComplete","selector","cache","threshhold","source","term","response","console","log","abort","e","ajaxdata","action","post","data","returned","JSON","parse","hits","result","map","a","url","_source","permalink","title","post_title","renderItem","item","search","onSelect","window","location","href","getAttribute"],"mappings":"mBAEAA,QAAO,WAYL,IAAIC,EAXJC,EAAIF,OAEJG,SAASC,eAAe,eAAeC,iBAAiB,SAAS,WAC/D,IAAMC,EAAOH,SAASC,eAAe,gBACjCE,IACFA,EAAKC,MAAQ,GACbD,EAAKE,YAMT,IAAIC,aAAa,CACfC,SAAU,gBACVC,OAAO,EACPC,WAAY,EACZC,OAAQ,SAAUC,EAAMC,GACtBC,QAAQC,IAAI,cAAgBH,GAC5B,IACEb,EAAIiB,QACJ,MAAOC,GACPH,QAAQC,IAAIE,GAEd,IAAIC,EAAW,CAAEC,OAAQ,iBAAkBP,KAAMA,GAEjDb,EAAMC,EAAEoB,KACN,0DACAF,GACA,SAAUG,GAER,IAAIC,EAAWC,KAAKC,MAAMD,KAAKC,MAAMH,IACrCP,QAAQC,IAAIO,EAASG,MACrB,IACIC,EADOJ,EAASG,KAAKA,KACPE,KAAI,SAAUC,GAC9B,MAAO,CAAEC,IAAKD,EAAEE,QAAQC,UAAWC,MAAOJ,EAAEE,QAAQG,eAGtDpB,EAASa,OAKfQ,WAAY,SAAUC,EAAMC,GAC1B,yBAAmBD,EAAKN,IAAxB,uDAA0EM,EAAKN,IAA/E,aAAuFM,EAAKH,MAA5F,SAEFK,SAAU,SAAUpB,EAAGL,EAAMuB,GAC3BG,OAAOC,SAASC,KAAOL,EAAKM,aAAa,mB","file":"frontend.js","sourcesContent":["\"use strict\";\n\njQuery(function () {\n  $ = jQuery;\n\n  document.getElementById(\"search-icon\").addEventListener(\"click\", function () {\n    const srch = document.getElementById(\"autocomplete\");\n    if (srch) {\n      srch.value = \"\";\n      srch.focus();\n    }\n  });\n\n  // autocomplete.js\n  var xhr;\n  new autoComplete({\n    selector: \"#autocomplete\",\n    cache: false,\n    threshhold: 3,\n    source: function (term, response) {\n      console.log(\"Searching: \" + term);\n      try {\n        xhr.abort();\n      } catch (e) {\n        console.log(e);\n      }\n      var ajaxdata = { action: \"elastic_search\", term: term };\n      // xhr = $.post(wpAjaxUrl, ajaxdata, function (data) {\n      xhr = $.post(\n        \"https://today.stage.williams.edu/elasticproxy/index.php\",\n        ajaxdata,\n        function (data) {\n          // console.log(data);\n          var returned = JSON.parse(JSON.parse(data));\n          console.log(returned.hits);\n          let hits = returned.hits.hits;\n          var result = hits.map(function (a) {\n            return { url: a._source.permalink, title: a._source.post_title };\n          });\n\n          response(result);\n        }\n      );\n    },\n\n    renderItem: function (item, search) {\n      return `<a href=\"${item.url}\" class=\"autocomplete-suggestion\" data-url=\"${item.url}\">${item.title}</a>`;\n    },\n    onSelect: function (e, term, item) {\n      window.location.href = item.getAttribute(\"data-url\");\n    },\n  });\n});\n"],"sourceRoot":""}