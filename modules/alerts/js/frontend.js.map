{"version":3,"sources":["webpack:///./src/js/frontend.js"],"names":["removeClosest","elem","selector","closest","document","body","classList","remove","e","setup_click","getElementById","Promise","resolve","reject","setTimeout","then","addEventListener","console","log","hide_id","hide_node","event","target","getAttribute","window","supports_storage","localStorage","setItem","add","getItem","remove_id","remove_item","querySelector"],"mappings":"oBAEA,WAEE,IAAMA,EAAgB,SAAWC,EAAMC,GACrC,IACiBD,EAAKE,QAASD,GAC7BE,SAASC,KAAKC,UAAUC,OAAQ,cAGlC,MAAQC,GAIN,OAFAC,KAEO,IAwBLA,EAAc,WACbL,SAASM,eAAgB,gBAGnB,IAAIC,SAAS,SAAWC,EAASC,GACtCC,YAAY,WACVF,EAAS,qBACR,QAgBJG,MAAM,WAaL,OAXAX,SAASM,eAAgB,eAAgBM,iBAAkB,SAAS,WAClEC,QAAQC,IAAK,SACb,IApCyBC,EAsCnBC,EAFUC,MAAMC,OAAOnB,QAAS,gBAEZoB,aAAc,cAtCfJ,EAuCRC,EAjDF,SAAWZ,GAClC,IACE,MAAO,iBAAkBgB,QAAqC,OAA3BA,OAAM,aAE3C,MAAQhB,GACN,OAAO,GAOJiB,IACHC,aAAaC,QAAS,eAAgBR,GAsChCnB,EAAeqB,MAAMC,OAAQ,0BApB1B,IAAIX,SAAS,SAAWC,EAASC,GACtCC,YAAY,WACVF,EAAS,qBACR,WAwBJG,MAAM,WAELX,SAASC,KAAKC,UAAUsB,IAAK,kBAMrC,GAAKF,aAAaG,QAAS,gBAAmB,EAAI,CAEhD,IAAMC,EAAYJ,aAAaG,QAAS,gBAClCE,EAAc3B,SAAS4B,cAAT,uBAAwCF,EAAxC,OAEpB9B,EAAe+B,EAAa,4BAG5BtB,IA3FJ,I","file":"frontend.js","sourcesContent":["\"use strict\";\r\n\r\n(function () {\r\n  //remove parent\r\n  const removeClosest = function ( elem, selector ) {\r\n    try {\r\n      const parent = elem.closest( selector );\r\n      document.body.classList.remove( \"alert-open\" );\r\n      // parent.parentNode.removeChild(parent);\r\n    }\r\n    catch ( e ) {\r\n      //setup if message has changed\r\n      setup_click();\r\n\r\n      return false;\r\n    }\r\n  };\r\n\r\n  //function to check if localstorage is supported\r\n  const supports_storage = function ( e ) {\r\n    try {\r\n      return 'localStorage' in window && window['localStorage'] !== null;\r\n    }\r\n    catch ( e ) {\r\n      return false;\r\n    }\r\n  };\r\n\r\n  //remove emergency msg or add message for non-support\r\n  const dont_show_alert = function ( hide_id ) {\r\n    /* Set localstorage to hide this item */\r\n    if ( supports_storage() ) {\r\n      localStorage.setItem( 'wms_noalerts', hide_id );\r\n    }\r\n\r\n  };\r\n\r\n  //click event\r\n  const setup_click = function () {\r\n    if ( document.getElementById( 'alert-close' ) ) {\r\n\r\n      const job1 = function () {\r\n        return new Promise( function ( resolve, reject ) {\r\n          setTimeout( function () {\r\n            resolve( 'result of job 1' );\r\n          }, 1000 );\r\n        } );\r\n      };\r\n\r\n      const job2 = function () {\r\n        return new Promise( function ( resolve, reject ) {\r\n          setTimeout( function () {\r\n            resolve( 'result of job 2' );\r\n          }, 1000 );\r\n        } );\r\n      };\r\n\r\n      const promise = job1();\r\n\r\n      promise\r\n\r\n        .then( function () {\r\n          //setup click event\r\n          document.getElementById( 'alert-close' ).addEventListener( 'click', function () {\r\n            console.log( 'click' );\r\n            const wrapper = event.target.closest( '#alert-close' );\r\n\r\n            const hide_node = wrapper.getAttribute( \"data-alert\" );\r\n            dont_show_alert( hide_node );\r\n\r\n            removeClosest( event.target, '.fl-builder-content' );\r\n\r\n          } );\r\n\r\n          return job2();\r\n        } )\r\n\r\n        .then( function () {\r\n          //make visible\r\n          document.body.classList.add( \"alert-open\" );\r\n        } )\r\n    }\r\n  };\r\n\r\n  //if user dismissed, remove for this session\r\n  if ( localStorage.getItem( 'wms_noalerts' ) > 0 ) {\r\n\r\n    const remove_id = localStorage.getItem( 'wms_noalerts' );\r\n    const remove_item = document.querySelector( `[data-alert=\"${remove_id}\"]` );\r\n\r\n    removeClosest( remove_item, '.fl-builder-content' )\r\n\r\n  } else {\r\n    setup_click();\r\n\r\n  }\r\n})();"],"sourceRoot":""}